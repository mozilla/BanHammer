{% extends "base.html" %}


{% block content %}
	<h1>Offenders</h1>
	<div class="row">
	    <div class="offset5 span2 center bold alert alert-info">
	    	All times are in UTC
	    </div>
    </div>
	<div class="row">
		<div class="span4 pull-right">
			{% if data.show_suggested == False %}
				<a class="btn" href="/offenders/show_suggested">Show also offenders that have never been blocked yet</a>
			{% else %}
				<a class="btn" href="/offenders">Hide offenders that have never been blocked yet</a>
			{% endif %}
		</div>
	</div>
	<br />
	<table class="table">
		<tr>
			<th align="left">
			    Address
			    <a href='?order_by=address&order=asc'><img src='/static/images/bullet-arrow-up.gif'></a>
			    <a href='?order_by=address&order=desc'><img src='/static/images/bullet-arrow-down.gif'></a>
			</th>
			<th align="left">
			    CIDR
			    <a href='?order_by=cidr&order=asc'><img src='/static/images/bullet-arrow-up.gif'></a>
			    <a href='?order_by=cidr&order=desc'><img src='/static/images/bullet-arrow-down.gif'></a>
			</th>
			<th align="center">
			    Created
			    <a href='?order_by=start_date&order=asc'><img src='/static/images/bullet-arrow-up.gif'></a>
			    <a href='?order_by=start_date&order=desc'><img src='/static/images/bullet-arrow-down.gif'></a>
			</th>
			<th align="center">
			    Expires
			    <a href='?order_by=end_date&order=asc'><img src='/static/images/bullet-arrow-up.gif'></a>
			    <a href='?order_by=end_date&order=desc'><img src='/static/images/bullet-arrow-down.gif'></a>
			</th>
			<th align="center">
			    Reporter
			    <a href='?order_by=reporter&order=asc'><img src='/static/images/bullet-arrow-up.gif'></a>
			    <a href='?order_by=reporter&order=desc'><img src='/static/images/bullet-arrow-down.gif'></a>
			</th>
			<th align="center">
			    <img src="{{ static('images/link.png') }}">
			</th>
			<th align="center">
			    <img src="{{ static('images/comment.gif') }}">
			</th>
			<th align="center">
			    <img src="{{ static('images/delete.gif') }}">
			</th>
		</tr>
		{% for b in blacklists %}
		    <tr>
			    <td align="left">{{ b.offender.address }}</td>
			    <td align="left">/{{ b.offender.cidr }}</td>
			    <td align="center">{{ b.start_date.strftime('%Y-%m-%d %H:%m') }}</td>
			    <td align="center">{{ b.end_date.strftime('%Y-%m-%d %H:%m') }}</td>
			    <td align="center">{{ b.reporter }}</td>
			    <td align="center">{% if b.bug_number %}
			    	<a href="https://bugzilla.mozilla.org/show_bug.cgi?id={{b.bug_number}}">
			    		<img src="{{ static('images/link.png') }}">
			    	</a>
			    {% endif %}</td>
			    <td align="center"><img title='{{b.comment}}' src="{{ static('images/comment.gif') }}"></td>
			    <td align="center">
			    	<a href="/blacklist/delete/?id={{b.id}}">
			    		<img src="{{ static('images/delete.gif') }}">
			    	</a>
			    </td>
		    </tr>
		{% endfor %}
		
		{% if not blacklists %}
			<tr><td colspan="7" class="empty">
				<div class="banner">No offenders.</div>
			</td></tr>
		{% endif %}
		
	</table>
{% endblock %}
